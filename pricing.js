'use strict';

const STORE = [
    {
        id: 0,
        packageTitle: 'Social',
        subtitle: 'Influencer Brands | Shoppable Instagram',
        header: 'Just the Basics:',
        description: `<div class="check-list-container">
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">
                <p class="list">On-site Shoppable Instagram Window</p>
            </div>
        </div>
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">        
                <p class="list">Access to User Generated Content from Instagram</p>
            </div>
        </div>
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Customizable Window Size</p>
            </div>
        </div>                 
        <div class="check-item">    
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">    
                <p class="list">Shoppable Category Windows</p>
            </div>
        </div>
        <div class="check-item">
                <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Scheduled Instagram Post</p>
            </div>
        </div>    
        <div class="check-item">
             <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Content Moderation Dashboard</p>
            </div>
        </div>                       
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Online Support and Email Support</p>
            </div>
        </div>
    </div>`,
        price: 49.99,
        savings: `<div class="savingsContainer">
                <p class="list">Billed Annually or $57.49 month-to-month</p>
                <p class="price-save">Save $90 per year</p>
                </div>`,
        button: 'Get Started',
        link: 'https://social.sandboxcommerce.com',
    },
    // {
    //     id: 1,
    //     packageTitle: 'Prime',
    //     subtitle: 'Emerging Brands | Growing Retailers',
    //     header: 'Social Plan Plus:',
    //     description: `<div class="check-list-container">
        // <div class="check-item">
        //     <img class="check-img" src="images/check.svg" alt="checkmark" />
        //     <div class="list-container">
        //         <p class="list">Launch to iOS & Android App Stores</p>
        //     </div>
        // </div>
        // <div class="check-item">    
        //     <img class="check-img" src="images/check.svg" alt="checkmark" />
        //     <div class="list-container">    
        //         <p class="list">eCommerce Platform Integration (Shopify, Bigcommerce, 3DCart)</p>
        //     </div>
        // </div>
        // <div class="check-item">
        //     <img class="check-img" src="images/check.svg" alt="checkmark" />
        //     <div class="list-container">        
        //         <p class="list">Unlimited Rich Push Notifications</p>
        //     </div>
        // </div>
        // <div class="check-item">
        //         <img class="check-img" src="images/check.svg" alt="checkmark" />
        //     <div class="list-container">         
        //         <p class="list">Apple Pay, Google Pay & Amazon Pay at Checkout</p>
        //     </div>
        // </div>    
        // <div class="check-item">
        //      <img class="check-img" src="images/check.svg" alt="checkmark" />
        //     <div class="list-container">         
        //         <p class="list">Integrations with Mailchimp & Klaviyo</p>
        //     </div>
        // </div>
        // <div class="check-item">
        //     <img class="check-img" src="images/check.svg" alt="checkmark" />
        //     <div class="list-container">         
        //         <p class="list">Executive dashboard</p>
        //     </div>
        // </div>                        
        // <div class="check-item">
        //     <img class="check-img" src="images/check.svg" alt="checkmark" />
        //     <div class="list-container">         
        //         <p class="list">Dedicated Customer Success Agent</p>
        //     </div>
        // </div>
    // </div>`,
    //     price: 249.99,
    //     savings: `<div class="savingsContainer">
    //             <p class="list">Billed Annually or $287.49 month-to-month</p>
    //             <p class="price-save">Save $450 per year</p>
    //             </div>`,
    //     button: 'Get Started',
    //     link: 'https://app.sandboxcommerce.com/login?register=true',
    // },
    {
        id: 1,
        packageTitle: 'Launch',
        subtitle: 'Hi Growth Brands | Digital Marketers',
        header: 'Build Your Mobile App:',
        description: `<div class="check-list-container">
        <div class="check-item">
        <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">
                <p class="list">Launch to iOS & Android App Stores</p>
            </div>
        </div>
        <div class="check-item">    
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">    
                <p class="list">eCommerce Platform Integration (Shopify, Bigcommerce, 3DCart)</p>
            </div>
        </div>
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">        
                <p class="list">Unlimited Rich Push Notifications</p>
            </div>
        </div>
        <div class="check-item">
                <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Apple Pay, Google Pay & Amazon Pay at Checkout</p>
            </div>
        </div>    
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Integrations with Mailchimp & Klaviyo</p>
            </div>
        </div>
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Executive dashboard</p>
            </div>
        </div>                        
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Dedicated Customer Success Agent</p>
            </div>
        </div>
        <div class="check-item">    
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">    
                <p class="list">Customer Engagement Dashboard</p>
            </div>
        </div>
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">        
                <p class="list">Segmentable Audience for Push Notifications</p>
            </div>
        </div>
        <div class="check-item">
                <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Premium Integrations like Twilio, Facebook Pixel & Google Analytics</p>
            </div>
        </div>    
        <div class="check-item">
             <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">Telephone and Online Support</p>
            </div>
        </div>
    </div>`,
        price: 249.99,
        savings: `<div class="savingsContainer">
                <p class="list">Billed Annually or $287.49 month-to-month</p>
                <p class="price-save">Save $450 per year</p>
                </div>`,
        button: 'Get Started',
        link: 'https://app.sandboxcommerce.com/login?register=true',
    },
    {
        id: 2,
        packageTitle: 'Premier',
        subtitle: 'Tailor-Made User Experience',
        header: 'Launch Plan Plus:',
        description: `<div class="check-list-container">
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">
                <p class="list">Custom UI Skin to Match Brand</p>
            </div>
        </div>
        <div class="check-item">    
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">    
                <p class="list">Augmented and Virtual Reality Integrations</p>
            </div>
        </div>
        <div class="check-item">
            <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">        
                <p class="list">Exportable Customer List to CSV</p>
            </div>
        </div>
        <div class="check-item">
                <img class="check-img" src="images/check.svg" alt="checkmark" />
            <div class="list-container">         
                <p class="list">24/7 On-Deck Support</p>
            </div>
        </div>
    </div>`,
        price: 'Drop us a call for Pricing',
        savings: `<div class="savingsContainer"></div>`,
        button: 'Get Started',
        link: "javascript:void(0);",
        chatId: 'premier_launch_intercom'
    },
]


function appendDetails(packNum) {
    $('.details-row').append(
    `<div class="col-12">
    <div class="details-box">
        <p class="card-title">${STORE[packNum].packageTitle}</p>
        <p class="card-subtitle">${STORE[packNum].subtitle}</p>
        <p class="detail-header">${STORE[packNum].header}</p>
        ${STORE[packNum].description}
        <div class="slide-container">
        </div>
        <p class="price-month price-month-details">${packNum === "3" ? "" : "$"}<span id="test">${STORE[packNum].price}</span> / Month</p>
        ${STORE[packNum].savings}
        <a id=${STORE[packNum].chatId} href=${STORE[packNum].link} onclick="trackPricingClicks('${STORE[packNum].packageTitle}')"><button class="get-started-btn">${STORE[packNum].button}</button></a>
        <a><p class="view" id="exit${packNum}">Exit Details</p></a>   
        </div>
    </div>`)
    if(packNum === "1" || packNum === "2" ) {
        appendSlider(packNum);
    }
    handleExit(packNum);
}

function appendSlider(packNum) {
    $('.slide-container').append(
        `<p class="audience">Audience Size&nbsp;<span id="people">0</span></p>
        <input type="range" min="0" max="500000" value="0" class="slider" id="myRange">`
    )
    handleSlider(packNum);
}

function handleSlider(packNum) {
    const slider = document.getElementById("myRange");
    const output = document.getElementById("people");
    output.innerHTML = slider.value;
    const newPrice = document.getElementById("test");
    newPrice.innerHTML = STORE[packNum].price;
    
    slider.oninput = function() {
        const thisVal = $(this).val();
        output.innerHTML = thisVal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        const priceIncrease =  thisVal * 0.01;
        if(thisVal >= 500000) {
            newPrice.innerHTML = '&nbsp;Custom';
        }
        else {
            newPrice.innerHTML =  (STORE[packNum].price + priceIncrease).toFixed(2);
        }
    }
}

function clearDetails() {
    $('.details-row').empty();
}

function handleDetails() {
    let packNum;
    $('main').on('click', '.list-view', function(event) {
        event.preventDefault();
        clearDetails();
        packNum = $(this).attr('id');
        // console.log(packNum);
        appendDetails(packNum);
        $('html,body').animate({
            scrollTop: $("#details-scroll").offset().top
        }, 'slow');
    })
}

function handleExit(packNum) {
    $('main').on('click', `#exit${packNum}`, function(event) {
        event.preventDefault();
        clearDetails();
        $('html,body').animate({
            scrollTop: $(`#pack-${packNum}-scroll`).offset().top -100
        }, 'slow');
    })
}

handleDetails();

